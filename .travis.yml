language: minimal

install:
  - git diff 4.9 > travis-test.diff
  - git remote add upstream git://git.suckless.org/dmenu

before_script:
  - cmp travis-test.diff patch-4.9.diff || true
  - cat travis-test.diff || true
  - git branch -a --merged || true

script:
  - |
    cmp --silent travis-test.diff patch-4.9.diff || \
      { echo "Patch is not up to date!" && return 1 }
  - |
    git branch -a --merged | grep remotes/upstream/master > /dev/null 2>&1 || \
      { echo "New commits in upstream!" && return 1 }
